# Medical Atlas -- уеб приложение

Уеб интерфейс на системата **Medical Atlas** за подпомагане на клиничното решение при антибиотикорезистентност. Включва вход за лекари, табло с агрегирана статистика, форма за прогноза чрез ML модел и административен панел.

---

## Какво прави приложението

- **Вход** -- автентикация с докторски идентификатор и парола; роля (здравен специалист / администратор).
- **Табло** -- статистики за седмицата: брой проверки, резистентни/нерезистентни случаи, най-използвани антибиотици, средна възраст на пациентите.
- **Прогноза** -- многостъпкова форма (данни за пациента и лечение); извикване на backend за прогноза за антибиотикорезистентност; показване на резултат и увереност.
- **Админ панел** -- достъпен само за потребители с роля "Администратор"; управление на лекари и болници.

---

## Технологии

- **Next.js 16** (App Router), **React 19**, **TypeScript**
- **Tailwind CSS**, **Radix UI**, **Recharts**, **React Hook Form**, **Zod**
- **Lucide React** за икони

Backend-ът (FastAPI, PostgreSQL, CatBoost модел) е отделен проект и трябва да работи паралелно при пълна функционалност.

---

## Изисквания

- **Node.js** 18+ (препоръчително 20+)
- **pnpm** или **npm**
- Работещ **backend** (AR Atlas) на `http://127.0.0.1:8000` или чрез променлива на средата

---

## Инсталиране и стартиране

За пълна работа са нужни **два сървъра**: backend (FastAPI) и frontend (Next.js). Backend-ът трябва да е пуснат преди или едновременно с frontend.

---

### Backend (FastAPI API)

Backend-ът е в отделен проект (напр. **AR Atlas** или **Medical-Atlas/backend**). Пуска се по следния начин:

**Изисквания:** Python 3.10+, PostgreSQL (базата да е създадена и мигрирана), файл с ML модел (`.cbm`), ако се използва прогноза.

1. Отворете папката на backend-а и създайте виртуална среда (при нужда):

   ```bash
   cd "AR Atlas"
   # или: cd Medical-Atlas/backend
   python -m venv .venv
   .venv\Scripts\activate
   ```

2. Инсталирайте зависимостите:

   ```bash
   pip install -r requirements.txt
   ```

3. Създайте `.env` в папката на backend с променливите за базата и JWT:

   ```env
   POSTGRES_DB=atlas_db
   POSTGRES_USER=atlas_user
   POSTGRES_PASSWORD=вашата_парола
   POSTGRES_HOST=localhost
   POSTGRES_PORT=5432
   JWT_SECRET=ваш_секретен_ключ
   ```

4. Стартирайте API сървъра:

   ```bash
   uvicorn src.api:app --host 127.0.0.1 --port 8000
   ```

   Backend-ът е достъпен на **http://127.0.0.1:8000**. Оставете този прозорец отворен, докато разработвате.

---

### Frontend (Next.js)

#### 1. Клониране и зависимости

```bash
cd projectAtlas
pnpm install
# или: npm install
```

#### 2. Конфигурация

При нужда задайте адреса на API-то чрез променлива на средата (напр. в `.env.local`):

```env
NEXT_PUBLIC_API_URL=http://127.0.0.1:8000
```

Ако не я зададете, приложението използва по подразбиране `http://127.0.0.1:8000` за заявки към backend.

#### 3. Режим разработка

```bash
pnpm dev
# или: npm run dev
```

Приложението е на **http://localhost:3000**.

#### 4. Production build

```bash
pnpm build
pnpm start
```

---

### Как да пускате всичко заедно

1. Стартирайте **backend**: в папката на AR Atlas (или Medical-Atlas/backend) -> `uvicorn src.api:app --host 127.0.0.1 --port 8000`.
2. В друг терминал стартирайте **frontend**: в `projectAtlas` -> `pnpm dev`.
3. Отворете браузър на **http://localhost:3000**.

## Лиценз

(c) 2025 Atlas Research Medical System. Всички права запазени.

